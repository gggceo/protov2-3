datasource db { provider = "postgresql"; url = env("DATABASE_URL") }
generator client { provider = "prisma-client-js" }

model Listing {
  id          String   @id @default(cuid())
  title       String
  price       Int
  sellerAlias String
  image       String?  // 画像URL（後でR2/Supabaseに差し替え可）
  createdAt   DateTime @default(now())
}

model Message {
  id        String   @id @default(cuid())
  roomId    String
  body      String
  ref       String?  // ?ref=@alias 追跡用
  createdAt DateTime @default(now())
}

model Report {
  id        String   @id @default(cuid())
  targetId  String
  reason    String
  createdAt DateTime @default(now())
}
enum VipTier {
  NONE
  SILVER
  GOLD
  PLATINUM
}

model User {
  id        String   @id @default(cuid())
  alias     String   @unique
  vipScore  Int      @default(0)
  vipTier   VipTier  @default(NONE)
  vipFlags  String[] @default([])
  fanScores Json?
  createdAt DateTime @default(now())
}